!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define("omnes",n):t.omnes=n()}(this,function(){"use strict";function t(){return this instanceof t?void(this._all={}):new t}function n(t,n){return n={exports:{}},t(n,n.exports),n.exports}function e(t,n){return window.io?n():void u(t+"/dist/socket.io.js",n)}function o(t,n){return this instanceof o?(c.call(this),void(this._progress=r(t,n,this))):new o(t,n)}function i(){o.prototype=Object.create(c.prototype),o.prototype.extract=function(t,n){this._progress.extract(t,n)}}function r(t,n,e){function o(){var t=location,n=t.origin||t.protocol+"//"+t.host;return n}var i=o(),c=5e3;if(!(this instanceof r))return new r(t,n,e);var s=io.connect(i+t,{"max reconnection attempts":Math.pow(2,32),"reconnection limit":c,path:n});e.on("auth",function(t,n){s.emit("auth",t,n)}),s.on("accept",function(){e.emit("accept")}),s.on("reject",function(){e.emit("reject")}),s.on("err",function(t){e.emit("error",t)}),s.on("file",function(t){e.emit("file",t)}),s.on("progress",function(t){e.emit("progress",t)}),s.on("end",function(){e.emit("end")}),s.on("connect",function(){e.emit("connect")}),s.on("disconnect",function(){e.emit("disconnect")}),this.abort=function(){s.emit("abort")},this.extract=function(t,n){s.emit("extract",t,n)}}var c=t;t.prototype._check=function(t,n){var e=2===arguments.length;if("string"!=typeof t)throw Error("event should be string!");if(e&&"function"!=typeof n)throw Error("callback should be function!")},t.prototype.on=function(t,n){var e=this._all[t];return this._check(t,n),e?e.push(n):this._all[t]=[n],this},t.prototype.addListener=t.prototype.on,t.prototype.once=function(t,n){var e=this;return e._check(t,n),e.on(t,function o(){n.apply(null,arguments),e.off(t,o)}),this},t.prototype.off=function(t,n){var e=this._all[t]||[],o=e.indexOf(n);for(this._check(t,n);~o;)e.splice(o,1),o=e.indexOf(n);return this},t.prototype.removeListener=t.prototype.off,t.prototype.emit=function(t){var n=[].slice.call(arguments,1),e=this._all[t];if(this._check(t),e)e.forEach(function(t){t.apply(null,n)});else if("error"===t)throw n[0];return this},t.prototype.removeAllListeners=function(t){return this._check(t),this._all[t]=[],this};var s="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f=n(function(t){!function(n){function e(){function t(e,o){var i=n(e);switch(i){case".js":t.js(e,o);break;case".css":t.css(e,o);break;case".json":t.json(e,o);break;default:t.ajax(e,o)}}function n(t){var n,e="",o="string"==typeof t;return o&&(n=t.lastIndexOf("."),~n&&(e=t.substr(n))),e}function e(t){var n,e,o,i="string"==typeof t;return i&&(~t.indexOf(":")&&(t+="-join"),n=t.lastIndexOf("/")+1,e=t.substr(t,n),o=t.replace(e,"").replace(/\./g,"-")),o}return t.js=function(t,n){var o=e(t),i=document.getElementById(o);return i?n():(i=document.createElement("script"),i.id=o,i.src=t,i.addEventListener("load",function(t){n(null,t)}),i.addEventListener("error",n),document.body.appendChild(i)),i},t.css=function(t,n){var o=e(t),i=document.getElementById(o);return i?n():(i=document.createElement("link"),i.id=e(t),i.rel="stylesheet",i.href=t,i.addEventListener("load",function(t){n(null,t)}),i.addEventListener("error",n),document.head.appendChild(i)),i},t.ajax=function(t,n){var e=new XMLHttpRequest;e.open("GET",t,!0),e.addEventListener("load",function(){var t;e.status>=200&&e.status<400&&(t=e.responseText,n(null,t))}),e.addEventListener("error",n),e.send()},t.json=function(n,e){t.ajax(n,function(t,n){var o;t||(o=JSON.parse(n)),e(t,o)})},t.series=function(n,e){var o=n.shift();o?t(o,function(o){o?e(o):t.series(n,e)}):e()},t.parallel=function(n,e){var o,i=n.length,r=function(t){--i,(!i&&!o||t)&&(o=!0,e(t))};n.forEach(function(n){t(n,r)})},t}t.exports?t.exports=new e:n.load=new e}(s)}),u=f.js,a=function(t,n,r){r||(n?(r=n,n=""):(r=t,t="/omnes")),n+="/socket.io",e(t,function(){i(),"function"==typeof r&&r(o(t,n))})};return a});
//# sourceMappingURL=omnes.js.map
